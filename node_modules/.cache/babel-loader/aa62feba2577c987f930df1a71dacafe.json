{"ast":null,"code":"import _objectWithoutProperties from \"C:/Users/Kompa/Desktop/games/my-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _objectSpread from \"C:/Users/Kompa/Desktop/games/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"C:/Users/Kompa/Desktop/games/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/Kompa/Desktop/games/my-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"C:/Users/Kompa/Desktop/games/my-app/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"C:/Users/Kompa/Desktop/games/my-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"C:/Users/Kompa/Desktop/games/my-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/Kompa/Desktop/games/my-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nvar _excluded = [\"pageParam\"],\n  _excluded2 = [\"pageParam\"];\nimport { QueryObserver } from './queryObserver.esm.js';\nimport { infiniteQueryBehavior, hasNextPage, hasPreviousPage } from './infiniteQueryBehavior.esm.js';\nvar InfiniteQueryObserver = /*#__PURE__*/function (_QueryObserver) {\n  _inherits(InfiniteQueryObserver, _QueryObserver);\n  var _super = _createSuper(InfiniteQueryObserver);\n  // Type override\n  // Type override\n  // Type override\n  // eslint-disable-next-line @typescript-eslint/no-useless-constructor\n  function InfiniteQueryObserver(client, options) {\n    _classCallCheck(this, InfiniteQueryObserver);\n    return _super.call(this, client, options);\n  }\n  _createClass(InfiniteQueryObserver, [{\n    key: \"bindMethods\",\n    value: function bindMethods() {\n      _get(_getPrototypeOf(InfiniteQueryObserver.prototype), \"bindMethods\", this).call(this);\n      this.fetchNextPage = this.fetchNextPage.bind(this);\n      this.fetchPreviousPage = this.fetchPreviousPage.bind(this);\n    }\n  }, {\n    key: \"setOptions\",\n    value: function setOptions(options, notifyOptions) {\n      _get(_getPrototypeOf(InfiniteQueryObserver.prototype), \"setOptions\", this).call(this, _objectSpread(_objectSpread({}, options), {}, {\n        behavior: infiniteQueryBehavior()\n      }), notifyOptions);\n    }\n  }, {\n    key: \"getOptimisticResult\",\n    value: function getOptimisticResult(options) {\n      options.behavior = infiniteQueryBehavior();\n      return _get(_getPrototypeOf(InfiniteQueryObserver.prototype), \"getOptimisticResult\", this).call(this, options);\n    }\n  }, {\n    key: \"fetchNextPage\",\n    value: function fetchNextPage() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        pageParam = _ref.pageParam,\n        options = _objectWithoutProperties(_ref, _excluded);\n      return this.fetch(_objectSpread(_objectSpread({}, options), {}, {\n        meta: {\n          fetchMore: {\n            direction: 'forward',\n            pageParam: pageParam\n          }\n        }\n      }));\n    }\n  }, {\n    key: \"fetchPreviousPage\",\n    value: function fetchPreviousPage() {\n      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        pageParam = _ref2.pageParam,\n        options = _objectWithoutProperties(_ref2, _excluded2);\n      return this.fetch(_objectSpread(_objectSpread({}, options), {}, {\n        meta: {\n          fetchMore: {\n            direction: 'backward',\n            pageParam: pageParam\n          }\n        }\n      }));\n    }\n  }, {\n    key: \"createResult\",\n    value: function createResult(query, options) {\n      var _state$fetchMeta, _state$fetchMeta$fetc, _state$fetchMeta2, _state$fetchMeta2$fet, _state$data, _state$data2;\n      var state = query.state;\n      var result = _get(_getPrototypeOf(InfiniteQueryObserver.prototype), \"createResult\", this).call(this, query, options);\n      var isFetching = result.isFetching,\n        isRefetching = result.isRefetching;\n      var isFetchingNextPage = isFetching && ((_state$fetchMeta = state.fetchMeta) == null ? void 0 : (_state$fetchMeta$fetc = _state$fetchMeta.fetchMore) == null ? void 0 : _state$fetchMeta$fetc.direction) === 'forward';\n      var isFetchingPreviousPage = isFetching && ((_state$fetchMeta2 = state.fetchMeta) == null ? void 0 : (_state$fetchMeta2$fet = _state$fetchMeta2.fetchMore) == null ? void 0 : _state$fetchMeta2$fet.direction) === 'backward';\n      return _objectSpread(_objectSpread({}, result), {}, {\n        fetchNextPage: this.fetchNextPage,\n        fetchPreviousPage: this.fetchPreviousPage,\n        hasNextPage: hasNextPage(options, (_state$data = state.data) == null ? void 0 : _state$data.pages),\n        hasPreviousPage: hasPreviousPage(options, (_state$data2 = state.data) == null ? void 0 : _state$data2.pages),\n        isFetchingNextPage: isFetchingNextPage,\n        isFetchingPreviousPage: isFetchingPreviousPage,\n        isRefetching: isRefetching && !isFetchingNextPage && !isFetchingPreviousPage\n      });\n    }\n  }]);\n  return InfiniteQueryObserver;\n}(QueryObserver);\nexport { InfiniteQueryObserver };","map":{"version":3,"sources":["../../src/infiniteQueryObserver.ts"],"names":["InfiniteQueryObserver","QueryObserver","constructor","client","options","bindMethods","fetchNextPage","bind","fetchPreviousPage","setOptions","notifyOptions","behavior","infiniteQueryBehavior","getOptimisticResult","pageParam","fetch","meta","fetchMore","direction","createResult","query","state","result","isFetching","isRefetching","isFetchingNextPage","fetchMeta","isFetchingPreviousPage","hasNextPage","data","pages","hasPreviousPage"],"mappings":"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","sourcesContent":["import type {\n  DefaultedInfiniteQueryObserverOptions,\n  FetchNextPageOptions,\n  FetchPreviousPageOptions,\n  InfiniteData,\n  InfiniteQueryObserverOptions,\n  InfiniteQueryObserverResult,\n  QueryKey,\n} from './types'\nimport type { QueryClient } from './queryClient'\nimport type { NotifyOptions, ObserverFetchOptions } from './queryObserver'\nimport { QueryObserver } from './queryObserver'\nimport {\n  hasNextPage,\n  hasPreviousPage,\n  infiniteQueryBehavior,\n} from './infiniteQueryBehavior'\nimport type { Query } from './query'\n\ntype InfiniteQueryObserverListener<TData, TError> = (\n  result: InfiniteQueryObserverResult<TData, TError>,\n) => void\n\nexport class InfiniteQueryObserver<\n  TQueryFnData = unknown,\n  TError = unknown,\n  TData = TQueryFnData,\n  TQueryData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n> extends QueryObserver<\n  TQueryFnData,\n  TError,\n  InfiniteData<TData>,\n  InfiniteData<TQueryData>,\n  TQueryKey\n> {\n  // Type override\n  subscribe!: (\n    listener?: InfiniteQueryObserverListener<TData, TError>,\n  ) => () => void\n\n  // Type override\n  getCurrentResult!: () => InfiniteQueryObserverResult<TData, TError>\n\n  // Type override\n  protected fetch!: (\n    fetchOptions: ObserverFetchOptions,\n  ) => Promise<InfiniteQueryObserverResult<TData, TError>>\n\n  // eslint-disable-next-line @typescript-eslint/no-useless-constructor\n  constructor(\n    client: QueryClient,\n    options: InfiniteQueryObserverOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryData,\n      TQueryKey\n    >,\n  ) {\n    super(client, options)\n  }\n\n  protected bindMethods(): void {\n    super.bindMethods()\n    this.fetchNextPage = this.fetchNextPage.bind(this)\n    this.fetchPreviousPage = this.fetchPreviousPage.bind(this)\n  }\n\n  setOptions(\n    options?: InfiniteQueryObserverOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryData,\n      TQueryKey\n    >,\n    notifyOptions?: NotifyOptions,\n  ): void {\n    super.setOptions(\n      {\n        ...options,\n        behavior: infiniteQueryBehavior(),\n      },\n      notifyOptions,\n    )\n  }\n\n  getOptimisticResult(\n    options: DefaultedInfiniteQueryObserverOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryData,\n      TQueryKey\n    >,\n  ): InfiniteQueryObserverResult<TData, TError> {\n    options.behavior = infiniteQueryBehavior()\n    return super.getOptimisticResult(options) as InfiniteQueryObserverResult<\n      TData,\n      TError\n    >\n  }\n\n  fetchNextPage({ pageParam, ...options }: FetchNextPageOptions = {}): Promise<\n    InfiniteQueryObserverResult<TData, TError>\n  > {\n    return this.fetch({\n      ...options,\n      meta: {\n        fetchMore: { direction: 'forward', pageParam },\n      },\n    })\n  }\n\n  fetchPreviousPage({\n    pageParam,\n    ...options\n  }: FetchPreviousPageOptions = {}): Promise<\n    InfiniteQueryObserverResult<TData, TError>\n  > {\n    return this.fetch({\n      ...options,\n      meta: {\n        fetchMore: { direction: 'backward', pageParam },\n      },\n    })\n  }\n\n  protected createResult(\n    query: Query<TQueryFnData, TError, InfiniteData<TQueryData>, TQueryKey>,\n    options: InfiniteQueryObserverOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryData,\n      TQueryKey\n    >,\n  ): InfiniteQueryObserverResult<TData, TError> {\n    const { state } = query\n    const result = super.createResult(query, options)\n\n    const { isFetching, isRefetching } = result\n\n    const isFetchingNextPage =\n      isFetching && state.fetchMeta?.fetchMore?.direction === 'forward'\n\n    const isFetchingPreviousPage =\n      isFetching && state.fetchMeta?.fetchMore?.direction === 'backward'\n\n    return {\n      ...result,\n      fetchNextPage: this.fetchNextPage,\n      fetchPreviousPage: this.fetchPreviousPage,\n      hasNextPage: hasNextPage(options, state.data?.pages),\n      hasPreviousPage: hasPreviousPage(options, state.data?.pages),\n      isFetchingNextPage,\n      isFetchingPreviousPage,\n      isRefetching:\n        isRefetching && !isFetchingNextPage && !isFetchingPreviousPage,\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}